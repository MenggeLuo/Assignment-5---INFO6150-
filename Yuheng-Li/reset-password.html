<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reset Password</title>
    <link rel="stylesheet" href="bootstrap-5.3.3-dist/css/bootstrap.css">
    <link rel="stylesheet" href="sign.css">
    <script src="bootstrap-5.3.3-dist/js/bootstrap.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
    <script type="text/javascript">
        (function () {
            emailjs.init({
                publicKey: "efeIpbvvbrvnvcVBj",
            });
        })();
    </script>
</head>
<body>
    <div class="container">
        <div id="reset-password-container" class="log-container">
            <h2 class="page-title mb-3">Reset Password</h2>
            
            <div id="email-form">
                <div class="mb-3">
                    <label for="email" class="form-label">Email address</label>
                    <input type="email" class="form-control" id="email" required>
                    <div id="error-email" class="error">Please Enter a Correct Email</div>
                </div>

                <!-- verification-code -->
                <div id="log-in-garph-verification-code-field">
                    <label for="garph-verification-code" class="form-label">Verification Code</label>
                    <div class="row mb-3">
                        <div class="col-sm-3">
                            <canvas id="canvas" width="100" height="35" onclick="refreshCode()"
                                style="border: 1px solid #ccc; border-radius: 5px;"></canvas>
                        </div>
                        <div class="col-sm-7 offset-sm-2">
                            <input type="text" value="" class="form-control" id="garph-verification-code" maxlength="4">
                        </div>
                        <div class="error" id="error-garph-verification-code">Please Enter a Correct Verification Code</div>
                    </div>
                </div>

                <button id="send-reset-email-button" class="btn btn-primary mb-3" disabled>Send Reset Email</button>
            </div>

            <div id="new-password-form" style="display: none;">
                <div class="mb-3">
                    <label for="new-password" class="form-label">New Password</label>
                    <input type="password" class="form-control" id="new-password" required>
                    <div id="error-new-password" class="error">Please Enter a Valid Password</div>
                </div>

                <div class="mb-3">
                    <label for="confirm-new-password" class="form-label">Confirm New Password</label>
                    <input type="password" class="form-control" id="confirm-new-password" required>
                    <div id="error-confirm-new-password" class="error">Passwords Do Not Match</div>
                </div>

                <button id="reset-password-button" class="btn btn-primary mb-3" disabled>Reset Password</button>
            </div>

            <div class="mb-3">
                <a href="log-in.html" class="btn-link">Back to Login</a>
            </div>
        </div>
    </div>

    <!-- Toast for success messages -->
    <div class="toast-container position-fixed top-0 start-50 translate-middle-x p-3">
        <div id="reset-email-sent" class="toast align-items-center text-white bg-success border-0" role="alert" aria-live="assertive" aria-atomic="true">
            <div class="d-flex">
                <div class="toast-body">
                    Reset email has been sent. Please check your inbox.
                </div>
                <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>
            </div>
        </div>
    </div>

    <!-- Toast for error messages -->
    <div class="toast-container position-fixed top-0 start-50 translate-middle-x p-3">
        <div id="reset-error" class="toast align-items-center text-white bg-danger border-0" role="alert" aria-live="assertive" aria-atomic="true">
            <div class="d-flex">
                <div class="toast-body">
                    An error occurred. Please try again.
                </div>
                <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>
            </div>
        </div>
    </div>

    <script src="reset-password.js"></script>
</body>
</html>
